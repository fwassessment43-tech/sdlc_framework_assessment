\nNOTICE\nRole: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code\nLanguage: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.\nATTENTION: Use \'##\' to SPLIT SECTIONS, not \'#\'. Output format carefully referenced "Format example".\n\n# Context\n## Design\n{"Implementation approach":"This project will be implemented using a microservices architecture with Python and Flask for the backend, React for the frontend, and PostgreSQL as the database. Flask will be used to create REST APIs for each microservice. React will provide a user-friendly interface for interacting with the system. PostgreSQL will ensure data persistence and scalability. We will leverage existing Python libraries for database interaction (SQLAlchemy), API development (Flask-RESTful), and data analysis (Pandas, Scikit-learn). Docker will be used for containerization and deployment. The microservices will communicate via REST APIs.  We\'ll prioritize a modular design to facilitate future expansion and maintenance.  The UI will follow a component-based architecture for reusability and maintainability.","File list":["main.py","frontend/src/App.js","frontend/src/components/TicketList.js","frontend/src/components/TicketDetail.js","ticket_service/app.py","ticket_service/models.py","ticket_service/api.py","analytics_service/app.py","analytics_service/analytics.py","database/init_db.py","docker-compose.yml","requirements.txt"],"Data structures and interfaces":"\\nclassDiagram\\n    class Main {\\n        -TicketService ticket_service\\n        -AnalyticsService analytics_service\\n        +main() str\\n    }\\n    class TicketService {\\n        -Database database\\n        +create_ticket(ticket_data: dict) int\\n        +get_ticket(ticket_id: int) dict\\n        +update_ticket(ticket_id: int, ticket_data: dict) bool\\n        +get_all_tickets(status: str) list\\n        +change_ticket_status(ticket_id: int, status: str) bool\\n        +add_message(ticket_id: int, message: str) bool\\n    }\\n    class AnalyticsService {\\n        -Database database\\n        +get_ticket_counts_by_period(period: str) int\\n        +get_average_resolution_time_by_month() dict\\n        +get_ticket_counts_by_category() dict\\n    }\\n    class Database {\\n        -connection\\n        +connect()\\n        +execute_query(query: str) list\\n        +insert_data(table: str, data: dict) int\\n        +update_data(table: str, condition: str, data: dict) bool\\n    }\\n    class Ticket {\\n        -ticket_id: int\\n        -description: str\\n        -status: str\\n        -category: str\\n        -opening_date: datetime\\n        -last_modification_date: datetime\\n        -closing_date: datetime\\n    }\\n    Main --> TicketService\\n    Main --> AnalyticsService\\n    TicketService --> Database\\n    AnalyticsService --> Database\\n    TicketService --* Ticket\\n","Program call flow":"\\nsequenceDiagram\\n    participant M as Main\\n    participant TS as TicketService\\n    participant AS as AnalyticsService\\n    participant DB as Database\\n    participant UI as UserInterface\\n\\n    UI->>M: Request to create a ticket\\n    M->>TS: create_ticket(ticket_data)\\n    TS->>DB: insert_data(tickets, ticket_data)\\n    DB-->>TS: return ticket_id\\n    TS-->>M: return ticket_id\\n    M-->>UI: return ticket_id\\n\\n    UI->>M: Request to get all open tickets\\n    M->>TS: get_all_tickets(status=\'open\')\\n    TS->>DB: execute_query(SELECT * FROM tickets WHERE status=\'open\')\\n    DB-->>TS: return list of tickets\\n    TS-->>M: return list of tickets\\n    M-->>UI: return list of tickets\\n\\n    UI->>M: Request analytics data (ticket counts by period)\\n    M->>AS: get_ticket_counts_by_period(period)\\n    AS->>DB: execute_query(SELECT COUNT(*) FROM tickets WHERE opening_date BETWEEN ... AND ... AND closing_date IS NULL)\\n    DB-->>AS: return count\\n    AS-->>M: return count\\n    M-->>UI: return count\\n","Anything UNCLEAR":"The specific database technology was not specified, so PostgreSQL was chosen. The level of detail required for the data analysis tools is somewhat unclear. More specific requirements for the analytics dashboards would be helpful. The exact API specifications for the microservices need to be further defined, including request/response formats and error handling.  The UI design draft is high-level; detailed mockups would be beneficial. The security aspects (authentication, authorization) are not fully defined."}\n\n## Task\n{"Required Python packages":["Flask==2.3.2","Flask-RESTful==0.3.9","SQLAlchemy==1.4.48","psycopg2-binary==2.9.6","pandas==1.5.3","scikit-learn==1.2.2","datetime"],"Required Other language third-party packages":["React","Node.js","npm or yarn"],"Logic Analysis":[["main.py","Main entry point, orchestrates TicketService and AnalyticsService."],["ticket_service/app.py","Flask app for ticket management, defines API endpoints."],["ticket_service/models.py","Defines the Ticket model using SQLAlchemy."],["ticket_service/api.py","Implements the REST API endpoints for ticket creation, retrieval, update, and status change."],["analytics_service/app.py","Flask app for analytics, defines API endpoints."],["analytics_service/analytics.py","Contains functions for calculating ticket counts, average resolution time, and ticket counts by category."],["database/init_db.py","Initializes the PostgreSQL database and creates the necessary tables."],["docker-compose.yml","Defines the Docker Compose configuration for running the microservices and database."],["frontend/src/App.js","Main component for the React frontend."],["frontend/src/components/TicketList.js","Component for displaying a list of tickets."],["frontend/src/components/TicketDetail.js","Component for displaying details of a specific ticket."]],"Task list":["database/init_db.py","ticket_service/models.py","ticket_service/app.py","ticket_service/api.py","analytics_service/analytics.py","analytics_service/app.py","main.py","frontend/src/App.js","frontend/src/components/TicketList.js","frontend/src/components/TicketDetail.js","docker-compose.yml","requirements.txt"],"Full API spec":"openapi: 3.0.0\\ninfo:\\n  title: Ticket Management API\\n  version: 1.0.0\\npaths:\\n  /tickets:\\n    post:\\n      summary: Create a new ticket\\n      requestBody:\\n        required: true\\n        content:\\n          application/json:\\n            schema:\\n              type: object\\n              properties:\\n                description: string\\n                status: string\\n                category: string\\n      responses:\\n        \'201\':\\n          description: Ticket created successfully\\n          content:\\n            application/json:\\n              schema:\\n                type: object\\n                properties:\\n                  ticket_id: integer\\n    get:\\n      summary: Get all tickets\\n      parameters:\\n        - in: query\\n          name: status\\n          schema:\\n            type: string\\n          description: Filter tickets by status\\n      responses:\\n        \'200\':\\n          description: List of tickets\\n          content:\\n            application/json:\\n              schema:\\n                type: array\\n                items:\\n                  type: object\\n  /tickets/{ticket_id}:\\n    get:\\n      summary: Get a specific ticket\\n      parameters:\\n        - in: path\\n          name: ticket_id\\n          schema:\\n            type: integer\\n          required: true\\n      responses:\\n        \'200\':\\n          description: Ticket details\\n          content:\\n            application/json:\\n              schema:\\n                type: object\\n    put:\\n      summary: Update a ticket\\n      requestBody:\\n        required: true\\n        content:\\n          application/json:\\n            schema:\\n              type: object\\n              properties:\\n                description: string\\n                status: string\\n                category: string\\n      responses:\\n        \'200\':\\n          description: Ticket updated successfully\\n    patch:\\n      summary: Change ticket status\\n      requestBody:\\n        required: true\\n        content:\\n          application/json:\\n            schema:\\n              type: object\\n              properties:\\n                status: string\\n      responses:\\n        \'200\':\\n          description: Ticket status updated successfully\\n  /analytics/ticket_counts:\\n    get:\\n      summary: Get ticket counts by period\\n      parameters:\\n        - in: query\\n          name: period\\n          schema:\\n            type: string\\n          description: The period for which to calculate ticket counts\\n      responses:\\n        \'200\':\\n          description: Ticket counts by period\\n          content:\\n            application/json:\\n              schema:\\n                type: integer","Shared Knowledge":"The project uses a microservices architecture with REST APIs for communication. PostgreSQL is used as the database. Flask and React are used for the backend and frontend, respectively. SQLAlchemy is used for database interaction.","Anything UNCLEAR":"The specific requirements for the analytics dashboards need to be defined in more detail. The UI design draft is high-level and detailed mockups would be beneficial. The security aspects (authentication, authorization) are not fully defined. Error handling strategies for the APIs need to be specified. The exact API request/response formats should be formally defined using a schema like OpenAPI."}\n\n## Legacy Code\n```Code\n\n```\n\n## Debug logs\n```text\n\n\n\n```\n\n## Bug Feedback logs\n```text\n\n```\n\n# Format example\n## Code: database/init_db.py\n```python\n## database/init_db.py\n...\n```\n\n# Instruction: Based on the context, follow "Format example", write code.\n\n## Code: database/init_db.py. Write code with triple quoto, based on the following attentions and context.\n1. Only One file: do your best to implement THIS ONLY ONE FILE.\n2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.\n3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.\n4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.\n5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.\n6. Before using a external variable/module, make sure you import it first.\n7. Write out EVERY CODE DETAIL, DON\'T LEAVE TODO.\n\n



