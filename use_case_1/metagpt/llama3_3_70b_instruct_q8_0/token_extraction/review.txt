
# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files



## Code to be Reviewed: board.py
```Code
"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()

```



# Format example 1
## Code Review: board.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: board.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM






NOTICE
Role: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Legacy Code
```Code
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
```

## Debug logs
```text



```

## Bug Feedback logs
```text

```

# Format example
## Code: snake.py
```python
## snake.py
...
```

# Instruction: Based on the context, follow "Format example", write code.

## Code: snake.py. Write code with triple quoto, based on the following attentions and context.
1. Only One file: do your best to implement THIS ONLY ONE FILE.
2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.
3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.
4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.
5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.
6. Before using a external variable/module, make sure you import it first.
7. Write out EVERY CODE DETAIL, DON'T LEAVE TODO.






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```


## Code to be Reviewed: snake.py
```Code
"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        snake.move()
        pygame.display.flip()
        clock.tick(10)

    pygame.quit()

```



# Format example 1
## Code Review: snake.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: snake.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```


## Code to be Reviewed: snake.py
```Code
"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        snake.move()
        pygame.display.flip()
        clock.tick(10)

    pygame.quit()

```

## Code Review: snake.py
1. No, the code does not fully implement the requirements as per the "Data structures and interfaces" section of the system design. Specifically, it does not handle collision detection with the board or other objects, which is a crucial aspect of the game logic.
2. No, there are potential errors in the `grow` method where the new tail segment's position is determined based on the direction of the snake. This could lead to incorrect growth patterns if not properly aligned with the existing body segments.
3. Yes, the code does follow the "Data structures and interfaces" for the Snake class as defined in the system design, including attributes like `body` and `direction`, and methods such as `move` and `grow`.
4. No, there is no implementation of collision detection or response to collisions (e.g., with the board edges or itself), which are essential functions for a snake game.
5. Yes, all necessary pre-dependencies have been imported, including Pygame and typing for type hints.
6. The methods from other files (like `board.py`) are not directly reused in this snippet, but the design implies that they should be integrated into the game loop managed by the Game class.

## Actions
1. Implement collision detection within the Snake class to check for collisions with the board edges and itself.
2. Correct the logic of the `grow` method to ensure proper alignment and addition of new segments based on the snake's direction.
3. Integrate the Snake class with other game components (like Board and Food) through the Game class to manage interactions and updates.

## Code Review Result
LBTM

# Instruction: rewrite code based on the Code Review and Actions
## Rewrite Code: CodeBlock. If it still has some bugs, rewrite snake.py with triple quotes. Do your utmost to optimize THIS SINGLE FILE. Return all completed codes and prohibit the return of unfinished codes.
```Code
## snake.py
...
```





# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```


## Code to be Reviewed: snake.py
```Code
"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()


```



# Format example 1
## Code Review: snake.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: snake.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```


## Code to be Reviewed: snake.py
```Code
"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()


```

## Code Review: snake.py
1. No, the code does not fully implement the requirements as per the "Data structures and interfaces" section of the system design. The `Snake` class is missing a method to check collision with the board edges and itself in relation to the game's scoring system.
2. Yes, the code logic appears to be mostly correct for moving the snake and checking collisions. However, there are potential issues if the snake's body overlaps when growing or turning.
3. No, the existing code does not fully follow the "Data structures and interfaces" as it lacks a clear connection between the `Snake` class and the scoring system mentioned in the game design.
4. Yes, all functions specified for the `Snake` class are implemented (`__init__`, `move`, `grow`, `check_collision_with_self`). However, additional functionality might be needed to fully align with the game's requirements.
5. Yes, all necessary pre-dependencies (like `pygame`) have been imported in the provided code snippet.
6. No, methods from other files are not being reused correctly because there is no indication of how the `Snake` class interacts with the `Board`, `Food`, or `Game` classes as described in the system design.

## Actions
1. Implement a method to update the game's score when the snake consumes food.
2. Modify the `move` and `grow` methods to handle edge cases where the snake turns back into itself or overlaps its own body.
3. Integrate the `Snake` class with other classes (`Board`, `Food`, `Game`) as per the system design.

## Code Review Result
LBTM

# Instruction: rewrite code based on the Code Review and Actions
## Rewrite Code: CodeBlock. If it still has some bugs, rewrite snake.py with triple quotes. Do your utmost to optimize THIS SINGLE FILE. Return all completed codes and prohibit the return of unfinished codes.
```Code
## snake.py
...
```





NOTICE
Role: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Legacy Code
```Code
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
```

## Debug logs
```text



```

## Bug Feedback logs
```text

```

# Format example
## Code: food.py
```python
## food.py
...
```

# Instruction: Based on the context, follow "Format example", write code.

## Code: food.py. Write code with triple quoto, based on the following attentions and context.
1. Only One file: do your best to implement THIS ONLY ONE FILE.
2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.
3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.
4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.
5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.
6. Before using a external variable/module, make sure you import it first.
7. Write out EVERY CODE DETAIL, DON'T LEAVE TODO.






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```


## Code to be Reviewed: food.py
```Code
"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self):
        """
        Generates a new random position for the food on the board.
        """
        self.x = random.randint(0, self.board_width - 1)
        self.y = random.randint(0, self.board_height - 1)

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()

```



# Format example 1
## Code Review: food.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: food.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```


## Code to be Reviewed: food.py
```Code
"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self):
        """
        Generates a new random position for the food on the board.
        """
        self.x = random.randint(0, self.board_width - 1)
        self.y = random.randint(0, self.board_height - 1)

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()

```

## Code Review: food.py
1. Yes, the code is implemented as per the requirements. It correctly initializes a new Food instance with a random position on the board and provides methods to generate a new position and draw the food on the screen.
2. The code logic appears to be correct. However, it does not check if the generated food position overlaps with the snake's body. To fix this, we need to pass the snake's body to the Food class and check for overlap when generating a new position.
3. Yes, the existing code follows the "Data structures and interfaces" provided in the problem statement. The Food class has the required attributes (x, y) and methods (generate_new_position, draw_food).
4. Yes, all functions are implemented. However, we might need to add an additional method to check if the food position overlaps with the snake's body.
5. Yes, all necessary pre-dependencies have been imported. The code correctly imports the required modules from Pygame and uses them as needed.
6. Yes, methods from other files are being reused correctly. Although not shown in this specific file, we can assume that the Food class is being used correctly in other parts of the game.

## Actions
1. Add a method to check if the food position overlaps with the snake's body.
   ```python
def check_overlap(self, snake_body):
    for x, y in snake_body:
        if x == self.x and y == self.y:
            return True
    return False
```
2. Modify the generate_new_position method to use the check_overlap method and regenerate the position if it overlaps with the snake's body.
   ```python
def generate_new_position(self, snake_body):
    while True:
        self.x = random.randint(0, self.board_width - 1)
        self.y = random.randint(0, self.board_height - 1)
        if not self.check_overlap(snake_body):
            break
```

## Code Review Result
LBTM

# Instruction: rewrite code based on the Code Review and Actions
## Rewrite Code: CodeBlock. If it still has some bugs, rewrite food.py with triple quotes. Do your utmost to optimize THIS SINGLE FILE. Return all completed codes and prohibit the return of unfinished codes.
```Code
## food.py
...
```





# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```


## Code to be Reviewed: food.py
```Code
"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if not self.check_overlap(snake_body):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()

```



# Format example 1
## Code Review: food.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: food.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```


## Code to be Reviewed: food.py
```Code
"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if not self.check_overlap(snake_body):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()

```

## Code Review: food.py
1. Yes, the code is implemented as per the requirements. It correctly represents a Food class with methods for generating new positions and checking overlap with the snake's body.
2. The code logic appears to be mostly correct. However, in the `generate_new_position` method, it does not check if the newly generated position is within the boundaries of the board. This could potentially lead to an IndexError if the random position exceeds the board dimensions. To fix this, we should add a check to ensure that the new position is within the board boundaries.
3. Yes, the existing code follows the "Data structures and interfaces" as specified in the class diagram. The Food class has attributes for its position (x, y) and methods for generating new positions and checking overlap with the snake's body.
4. Yes, all functions are implemented. However, it would be beneficial to add some error handling or input validation to ensure that the `snake_body` parameter passed to the `generate_new_position` method is a valid list of coordinates.
5. Yes, all necessary pre-dependencies have been imported. The code correctly imports the required modules from Pygame and uses them as needed.
6. Yes, methods from other files are being reused correctly. Although this specific file does not reuse methods from other files, it provides a clear interface for its own methods to be used by other parts of the program.

## Actions
1. Add boundary checks in the `generate_new_position` method to prevent potential IndexErrors.
   ```python
def generate_new_position(self, snake_body):
    while True:
        self.x = random.randint(0, self.board_width - 1)
        self.y = random.randint(0, self.board_height - 1)
        if (0 <= self.x < self.board_width and 
            0 <= self.y < self.board_height and 
            not self.check_overlap(snake_body)):
            break
```

## Code Review Result
LBTM

# Instruction: rewrite code based on the Code Review and Actions
## Rewrite Code: CodeBlock. If it still has some bugs, rewrite food.py with triple quotes. Do your utmost to optimize THIS SINGLE FILE. Return all completed codes and prohibit the return of unfinished codes.
```Code
## food.py
...
```





NOTICE
Role: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Legacy Code
```Code
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
----- food.py
```"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if (0 <= self.x < self.board_width and 
                0 <= self.y < self.board_height and 
                not self.check_overlap(snake_body)):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
```

## Debug logs
```text



```

## Bug Feedback logs
```text

```

# Format example
## Code: game.py
```python
## game.py
...
```

# Instruction: Based on the context, follow "Format example", write code.

## Code: game.py. Write code with triple quoto, based on the following attentions and context.
1. Only One file: do your best to implement THIS ONLY ONE FILE.
2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.
3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.
4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.
5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.
6. Before using a external variable/module, make sure you import it first.
7. Write out EVERY CODE DETAIL, DON'T LEAVE TODO.






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
----- food.py
```"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if (0 <= self.x < self.board_width and 
                0 <= self.y < self.board_height and 
                not self.check_overlap(snake_body)):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```


## Code to be Reviewed: game.py
```Code
"""
This module contains the Game class, which represents the main game loop and handles user input.
"""

import pygame
from board import Board
from snake import Snake
from food import Food

class Game:
    """
    Represents the game with its board, snake, food, and score.

    Attributes:
        board (Board): The game board.
        snake (Snake): The snake object.
        food (Food): The food object.
        score (int): The current score.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Game instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.board: Board = Board(width, height)
        self.snake: Snake = Snake()
        self.food: Food = Food(width, height)
        self.score: int = 0

    def run(self):
        """
        Runs the game loop.

        Note:
            This method initializes Pygame and handles user input.
        """
        pygame.init()
        screen = pygame.display.set_mode((400, 400))
        clock = pygame.time.Clock()

        running = True
        while running:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    self.handle_events(event.key)

            screen.fill((0, 0, 0))  # Fill the screen with black color
            self.board.draw_grid()  # Draw the grid on the screen

            try:
                self.update()
            except ValueError as e:
                print(e)
                running = False

            if self.snake.check_collision_with_self():
                print("Snake collided with itself")
                running = False

            for x, y in self.snake.body:
                rect = pygame.Rect(x * 20, y * 20, 20, 20)
                pygame.draw.rect(screen, (255, 255, 255), rect)

            self.food.draw_food(screen)  # Draw the food on the screen

            pygame.display.flip()
            clock.tick(10)

        pygame.quit()

    def handle_events(self, key: int):
        """
        Handles user input events.

        Args:
            key (int): The pressed key.
        """
        if key == pygame.K_UP and self.snake.direction != 'down':
            self.snake.direction = 'up'
        elif key == pygame.K_DOWN and self.snake.direction != 'up':
            self.snake.direction = 'down'
        elif key == pygame.K_LEFT and self.snake.direction != 'right':
            self.snake.direction = 'left'
        elif key == pygame.K_RIGHT and self.snake.direction != 'left':
            self.snake.direction = 'right'

    def update(self):
        """
        Updates the game state.

        Note:
            This method moves the snake, checks for collisions with food, and updates the score.
        """
        self.snake.move(self.board.width, self.board.height)
        if (self.snake.body[0][0] == self.food.x and 
            self.snake.body[0][1] == self.food.y):
            self.score += 1
            self.snake.grow()
            self.food.generate_new_position(self.snake.body)

# Example usage:
if __name__ == "__main__":
    game = Game(20, 20)
    game.run()

```



# Format example 1
## Code Review: game.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: game.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM






NOTICE
Role: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Legacy Code
```Code
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
----- food.py
```"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if (0 <= self.x < self.board_width and 
                0 <= self.y < self.board_height and 
                not self.check_overlap(snake_body)):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- game.py
```"""
This module contains the Game class, which represents the main game loop and handles user input.
"""

import pygame
from board import Board
from snake import Snake
from food import Food

class Game:
    """
    Represents the game with its board, snake, food, and score.

    Attributes:
        board (Board): The game board.
        snake (Snake): The snake object.
        food (Food): The food object.
        score (int): The current score.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Game instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.board: Board = Board(width, height)
        self.snake: Snake = Snake()
        self.food: Food = Food(width, height)
        self.score: int = 0

    def run(self):
        """
        Runs the game loop.

        Note:
            This method initializes Pygame and handles user input.
        """
        pygame.init()
        screen = pygame.display.set_mode((400, 400))
        clock = pygame.time.Clock()

        running = True
        while running:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    self.handle_events(event.key)

            screen.fill((0, 0, 0))  # Fill the screen with black color
            self.board.draw_grid()  # Draw the grid on the screen

            try:
                self.update()
            except ValueError as e:
                print(e)
                running = False

            if self.snake.check_collision_with_self():
                print("Snake collided with itself")
                running = False

            for x, y in self.snake.body:
                rect = pygame.Rect(x * 20, y * 20, 20, 20)
                pygame.draw.rect(screen, (255, 255, 255), rect)

            self.food.draw_food(screen)  # Draw the food on the screen

            pygame.display.flip()
            clock.tick(10)

        pygame.quit()

    def handle_events(self, key: int):
        """
        Handles user input events.

        Args:
            key (int): The pressed key.
        """
        if key == pygame.K_UP and self.snake.direction != 'down':
            self.snake.direction = 'up'
        elif key == pygame.K_DOWN and self.snake.direction != 'up':
            self.snake.direction = 'down'
        elif key == pygame.K_LEFT and self.snake.direction != 'right':
            self.snake.direction = 'left'
        elif key == pygame.K_RIGHT and self.snake.direction != 'left':
            self.snake.direction = 'right'

    def update(self):
        """
        Updates the game state.

        Note:
            This method moves the snake, checks for collisions with food, and updates the score.
        """
        self.snake.move(self.board.width, self.board.height)
        if (self.snake.body[0][0] == self.food.x and 
            self.snake.body[0][1] == self.food.y):
            self.score += 1
            self.snake.grow()
            self.food.generate_new_position(self.snake.body)

# Example usage:
if __name__ == "__main__":
    game = Game(20, 20)
    game.run()
```
```

## Debug logs
```text



```

## Bug Feedback logs
```text

```

# Format example
## Code: main.py
```python
## main.py
...
```

# Instruction: Based on the context, follow "Format example", write code.

## Code: main.py. Write code with triple quoto, based on the following attentions and context.
1. Only One file: do your best to implement THIS ONLY ONE FILE.
2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.
3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.
4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.
5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.
6. Before using a external variable/module, make sure you import it first.
7. Write out EVERY CODE DETAIL, DON'T LEAVE TODO.






NOTICE
Role: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Legacy Code
```Code
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
----- food.py
```"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if (0 <= self.x < self.board_width and 
                0 <= self.y < self.board_height and 
                not self.check_overlap(snake_body)):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- game.py
```"""
This module contains the Game class, which represents the main game loop and handles user input.
"""

import pygame
from board import Board
from snake import Snake
from food import Food

class Game:
    """
    Represents the game with its board, snake, food, and score.

    Attributes:
        board (Board): The game board.
        snake (Snake): The snake object.
        food (Food): The food object.
        score (int): The current score.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Game instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.board: Board = Board(width, height)
        self.snake: Snake = Snake()
        self.food: Food = Food(width, height)
        self.score: int = 0

    def run(self):
        """
        Runs the game loop.

        Note:
            This method initializes Pygame and handles user input.
        """
        pygame.init()
        screen = pygame.display.set_mode((400, 400))
        clock = pygame.time.Clock()

        running = True
        while running:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    self.handle_events(event.key)

            screen.fill((0, 0, 0))  # Fill the screen with black color
            self.board.draw_grid()  # Draw the grid on the screen

            try:
                self.update()
            except ValueError as e:
                print(e)
                running = False

            if self.snake.check_collision_with_self():
                print("Snake collided with itself")
                running = False

            for x, y in self.snake.body:
                rect = pygame.Rect(x * 20, y * 20, 20, 20)
                pygame.draw.rect(screen, (255, 255, 255), rect)

            self.food.draw_food(screen)  # Draw the food on the screen

            pygame.display.flip()
            clock.tick(10)

        pygame.quit()

    def handle_events(self, key: int):
        """
        Handles user input events.

        Args:
            key (int): The pressed key.
        """
        if key == pygame.K_UP and self.snake.direction != 'down':
            self.snake.direction = 'up'
        elif key == pygame.K_DOWN and self.snake.direction != 'up':
            self.snake.direction = 'down'
        elif key == pygame.K_LEFT and self.snake.direction != 'right':
            self.snake.direction = 'left'
        elif key == pygame.K_RIGHT and self.snake.direction != 'left':
            self.snake.direction = 'right'

    def update(self):
        """
        Updates the game state.

        Note:
            This method moves the snake, checks for collisions with food, and updates the score.
        """
        self.snake.move(self.board.width, self.board.height)
        if (self.snake.body[0][0] == self.food.x and 
            self.snake.body[0][1] == self.food.y):
            self.score += 1
            self.snake.grow()
            self.food.generate_new_position(self.snake.body)

# Example usage:
if __name__ == "__main__":
    game = Game(20, 20)
    game.run()
```
```

## Debug logs
```text



```

## Bug Feedback logs
```text

```

# Format example
## Code: main.py
```python
## main.py
...
```

# Instruction: Based on the context, follow "Format example", write code.

## Code: main.py. Write code with triple quoto, based on the following attentions and context.
1. Only One file: do your best to implement THIS ONLY ONE FILE.
2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.
3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.
4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.
5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.
6. Before using a external variable/module, make sure you import it first.
7. Write out EVERY CODE DETAIL, DON'T LEAVE TODO.






NOTICE
Role: You are a professional engineer; the main goal is to write google-style, elegant, modular, easy to read and maintain code
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Legacy Code
```Code
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
----- food.py
```"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if (0 <= self.x < self.board_width and 
                0 <= self.y < self.board_height and 
                not self.check_overlap(snake_body)):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- game.py
```"""
This module contains the Game class, which represents the main game loop and handles user input.
"""

import pygame
from board import Board
from snake import Snake
from food import Food

class Game:
    """
    Represents the game with its board, snake, food, and score.

    Attributes:
        board (Board): The game board.
        snake (Snake): The snake object.
        food (Food): The food object.
        score (int): The current score.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Game instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.board: Board = Board(width, height)
        self.snake: Snake = Snake()
        self.food: Food = Food(width, height)
        self.score: int = 0

    def run(self):
        """
        Runs the game loop.

        Note:
            This method initializes Pygame and handles user input.
        """
        pygame.init()
        screen = pygame.display.set_mode((400, 400))
        clock = pygame.time.Clock()

        running = True
        while running:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    self.handle_events(event.key)

            screen.fill((0, 0, 0))  # Fill the screen with black color
            self.board.draw_grid()  # Draw the grid on the screen

            try:
                self.update()
            except ValueError as e:
                print(e)
                running = False

            if self.snake.check_collision_with_self():
                print("Snake collided with itself")
                running = False

            for x, y in self.snake.body:
                rect = pygame.Rect(x * 20, y * 20, 20, 20)
                pygame.draw.rect(screen, (255, 255, 255), rect)

            self.food.draw_food(screen)  # Draw the food on the screen

            pygame.display.flip()
            clock.tick(10)

        pygame.quit()

    def handle_events(self, key: int):
        """
        Handles user input events.

        Args:
            key (int): The pressed key.
        """
        if key == pygame.K_UP and self.snake.direction != 'down':
            self.snake.direction = 'up'
        elif key == pygame.K_DOWN and self.snake.direction != 'up':
            self.snake.direction = 'down'
        elif key == pygame.K_LEFT and self.snake.direction != 'right':
            self.snake.direction = 'left'
        elif key == pygame.K_RIGHT and self.snake.direction != 'left':
            self.snake.direction = 'right'

    def update(self):
        """
        Updates the game state.

        Note:
            This method moves the snake, checks for collisions with food, and updates the score.
        """
        self.snake.move(self.board.width, self.board.height)
        if (self.snake.body[0][0] == self.food.x and 
            self.snake.body[0][1] == self.food.y):
            self.score += 1
            self.snake.grow()
            self.food.generate_new_position(self.snake.body)

# Example usage:
if __name__ == "__main__":
    game = Game(20, 20)
    game.run()
```
```

## Debug logs
```text



```

## Bug Feedback logs
```text

```

# Format example
## Code: main.py
```python
## main.py
...
```

# Instruction: Based on the context, follow "Format example", write code.

## Code: main.py. Write code with triple quoto, based on the following attentions and context.
1. Only One file: do your best to implement THIS ONLY ONE FILE.
2. COMPLETE CODE: Your code will be part of the entire project, so please implement complete, reliable, reusable code snippets.
3. Set default value: If there is any setting, ALWAYS SET A DEFAULT VALUE, ALWAYS USE STRONG TYPE AND EXPLICIT VARIABLE. AVOID circular import.
4. Follow design: YOU MUST FOLLOW "Data structures and interfaces". DONT CHANGE ANY DESIGN. Do not use public member functions that do not exist in your design.
5. CAREFULLY CHECK THAT YOU DONT MISS ANY NECESSARY CLASS/FUNCTION IN THIS FILE.
6. Before using a external variable/module, make sure you import it first.
7. Write out EVERY CODE DETAIL, DON'T LEAVE TODO.






# System
Role: You are a professional software engineer, and your main task is to review and revise the code. You need to ensure that the code conforms to the google-style standards, is elegantly designed and modularized, easy to read and maintain.
Language: Please use the same language as the user requirement, but the title and code should be still in English. For example, if the user speaks Chinese, the specific text of your answer should also be in Chinese.
ATTENTION: Use '##' to SPLIT SECTIONS, not '#'. Output format carefully referenced "Format example".

# Context
## System Design
{"Implementation approach":"We will utilize the Pygame library to create a grid-based game board with smooth snake movement and collision detection. The game will feature a simple yet visually appealing UI with clear instructions and a scoring system.","File list":["main.py","game.py","snake.py","food.py"],"Data structures and interfaces":"\nclassDiagram\n    class Game {\n        -board: Board\n        -snake: Snake\n        -food: Food\n        -score: int\n        +__init__() None\n        +run() None\n        +handle_events() None\n        +update() None\n        +render() None\n    }\n    class Board {\n        -width: int\n        -height: int\n        -grid: list\n        +__init__(width: int, height: int) None\n        +draw_grid() None\n    }\n    class Snake {\n        -body: list\n        -direction: str\n        +__init__() None\n        +move() None\n        +grow() None\n    }\n    class Food {\n        -x: int\n        -y: int\n        +__init__() None\n        +generate_new_position() None\n    }\n    Game --> Board\n    Game --> Snake\n    Game --> Food\n    Snake --> Board\n","Program call flow":"\nsequenceDiagram\n    participant G as Game\n    participant B as Board\n    participant S as Snake\n    participant F as Food\n    G->>G: __init__()\n    G->>B: draw_grid()\n    G->>S: move()\n    G->>F: generate_new_position()\n    G->>G: handle_events()\n    G->>G: update()\n    G->>G: render()\n    S->>B: check_collision()\n    F->>S: check_consumption()\n    G->>G: run()\n","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Task
{"Required Python packages":["pygame==2.0.1"],"Required Other language third-party packages":["No third-party dependencies required"],"Logic Analysis":[["game.py","Contains Game class with methods: __init__, run, handle_events, update, render"],["snake.py","Contains Snake class with methods: __init__, move, grow"],["food.py","Contains Food class with methods: __init__, generate_new_position"],["board.py","Contains Board class with methods: __init__, draw_grid"]],"Task list":["board.py","snake.py","food.py","game.py","main.py"],"Full API spec":"","Shared Knowledge":"`game.py` contains the main game loop and handles user input, `snake.py` and `food.py` contain classes for snake and food objects, `board.py` contains the game board representation.","Anything UNCLEAR":"Clarification needed on the specific graphics library or framework for Python, but Pygame is assumed to be used. Additionally, the project requirements do not specify any particular audio effects or soundtracks."}

## Code Files
----- board.py
```"""
This module contains the Board class, which represents the game board in the snake game.
"""

import pygame

class Board:
    """
    Represents the game board with a grid of squares.
    
    Attributes:
        width (int): The width of the board in number of squares.
        height (int): The height of the board in number of squares.
        grid (list): A 2D list representing the board, where each element is a square.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Board instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.width = width
        self.height = height
        self.grid = [[0 for _ in range(width)] for _ in range(height)]

    def draw_grid(self):
        """
        Draws the grid on the screen using Pygame.

        Note:
            This method assumes that a Pygame window has already been initialized.
        """
        cell_size = 20  # Default cell size
        for i in range(self.height):
            for j in range(self.width):
                rect = pygame.Rect(j * cell_size, i * cell_size, cell_size, cell_size)
                pygame.draw.rect(pygame.display.get_surface(), (255, 255, 255), rect, 1)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    board = Board(20, 20)
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        board.draw_grid()  # Draw the grid on the screen
        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- snake.py
```"""
This module contains the Snake class, which represents the snake object in the game.
"""

import pygame
from typing import List

class Snake:
    """
    Represents the snake with its body and direction.
    
    Attributes:
        body (List[List[int]]): A list of coordinates representing the snake's body.
        direction (str): The current direction of the snake, either 'up', 'down', 'left', or 'right'.
    """

    def __init__(self):
        """
        Initializes a new Snake instance with default values.
        """
        self.body: List[List[int]] = [[5, 5], [4, 5], [3, 5]]
        self.direction: str = 'right'

    def move(self, board_width: int, board_height: int):
        """
        Moves the snake in its current direction.

        Note:
            This method modifies the snake's body and direction.
        """
        head_x, head_y = self.body[0]
        if self.direction == 'up':
            new_head = [head_x, head_y - 1]
        elif self.direction == 'down':
            new_head = [head_x, head_y + 1]
        elif self.direction == 'left':
            new_head = [head_x - 1, head_y]
        elif self.direction == 'right':
            new_head = [head_x + 1, head_y]

        # Collision detection with board edges
        if (new_head[0] < 0 or new_head[0] >= board_width or 
            new_head[1] < 0 or new_head[1] >= board_height):
            raise ValueError("Snake collided with the board edge")

        self.body.insert(0, new_head)
        self.body.pop()

    def grow(self):
        """
        Grows the snake by adding a new segment to its body.

        Note:
            This method modifies the snake's body.
        """
        tail_x, tail_y = self.body[-1]
        if len(self.body) > 1:
            second_last_x, second_last_y = self.body[-2]
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]
        else:
            if self.direction == 'up':
                new_tail = [tail_x, tail_y + 1]
            elif self.direction == 'down':
                new_tail = [tail_x, tail_y - 1]
            elif self.direction == 'left':
                new_tail = [tail_x + 1, tail_y]
            elif self.direction == 'right':
                new_tail = [tail_x - 1, tail_y]

        self.body.append(new_tail)

    def check_collision_with_self(self):
        """
        Checks if the snake has collided with itself.

        Returns:
            bool: True if the snake has collided with itself, False otherwise.
        """
        head_x, head_y = self.body[0]
        for x, y in self.body[1:]:
            if x == head_x and y == head_y:
                return True
        return False

    def update_score(self):
        """
        Updates the game's score when the snake consumes food.

        Note:
            This method should be called after the snake has consumed food.
        """
        # TO DO: implement scoring system
        pass

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    snake = Snake()
    board_width = 20
    board_height = 20
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        for x, y in snake.body:
            rect = pygame.Rect(x * 20, y * 20, 20, 20)
            pygame.draw.rect(screen, (255, 255, 255), rect)

        try:
            snake.move(board_width, board_height)
        except ValueError as e:
            print(e)
            running = False

        if snake.check_collision_with_self():
            print("Snake collided with itself")
            running = False

        pygame.display.flip()
        clock.tick(10)

    pygame.quit()
```
----- food.py
```"""
This module contains the Food class, which represents the food object in the game.
"""

import pygame
import random

class Food:
    """
    Represents the food with its position on the board.
    
    Attributes:
        x (int): The x-coordinate of the food's position.
        y (int): The y-coordinate of the food's position.
        board_width (int): The width of the board.
        board_height (int): The height of the board.
    """

    def __init__(self, board_width: int = 20, board_height: int = 20):
        """
        Initializes a new Food instance with a random position on the board.

        Args:
            board_width (int, optional): The width of the board. Defaults to 20.
            board_height (int, optional): The height of the board. Defaults to 20.
        """
        self.board_width: int = board_width
        self.board_height: int = board_height
        self.x: int = random.randint(0, board_width - 1)
        self.y: int = random.randint(0, board_height - 1)

    def generate_new_position(self, snake_body):
        """
        Generates a new random position for the food on the board.

        Args:
            snake_body (list): The body of the snake.
        """
        while True:
            self.x = random.randint(0, self.board_width - 1)
            self.y = random.randint(0, self.board_height - 1)
            if (0 <= self.x < self.board_width and 
                0 <= self.y < self.board_height and 
                not self.check_overlap(snake_body)):
                break

    def check_overlap(self, snake_body):
        """
        Checks if the food position overlaps with the snake's body.

        Args:
            snake_body (list): The body of the snake.

        Returns:
            bool: True if the food position overlaps with the snake's body, False otherwise.
        """
        for x, y in snake_body:
            if x == self.x and y == self.y:
                return True
        return False

    def draw_food(self, screen: pygame.Surface):
        """
        Draws the food on the given Pygame screen.

        Args:
            screen (pygame.Surface): The Pygame screen to draw the food on.
        """
        cell_size = 20  # Default cell size
        rect = pygame.Rect(self.x * cell_size, self.y * cell_size, cell_size, cell_size)
        pygame.draw.rect(screen, (255, 0, 0), rect)

# Example usage:
if __name__ == "__main__":
    pygame.init()
    screen = pygame.display.set_mode((400, 400))
    clock = pygame.time.Clock()

    food = Food(20, 20)
    snake_body = [[5, 5], [4, 5], [3, 5]]
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        screen.fill((0, 0, 0))  # Fill the screen with black color
        food.draw_food(screen)  # Draw the food on the screen

        # Regenerate food position every second
        if random.random() < 0.01:
            food.generate_new_position(snake_body)

        pygame.display.flip()
        clock.tick(60)

    pygame.quit()
```
----- game.py
```"""
This module contains the Game class, which represents the main game loop and handles user input.
"""

import pygame
from board import Board
from snake import Snake
from food import Food

class Game:
    """
    Represents the game with its board, snake, food, and score.

    Attributes:
        board (Board): The game board.
        snake (Snake): The snake object.
        food (Food): The food object.
        score (int): The current score.
    """

    def __init__(self, width: int = 20, height: int = 20):
        """
        Initializes a new Game instance with the given width and height.

        Args:
            width (int, optional): The width of the board. Defaults to 20.
            height (int, optional): The height of the board. Defaults to 20.
        """
        self.board: Board = Board(width, height)
        self.snake: Snake = Snake()
        self.food: Food = Food(width, height)
        self.score: int = 0

    def run(self):
        """
        Runs the game loop.

        Note:
            This method initializes Pygame and handles user input.
        """
        pygame.init()
        screen = pygame.display.set_mode((400, 400))
        clock = pygame.time.Clock()

        running = True
        while running:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    self.handle_events(event.key)

            screen.fill((0, 0, 0))  # Fill the screen with black color
            self.board.draw_grid()  # Draw the grid on the screen

            try:
                self.update()
            except ValueError as e:
                print(e)
                running = False

            if self.snake.check_collision_with_self():
                print("Snake collided with itself")
                running = False

            for x, y in self.snake.body:
                rect = pygame.Rect(x * 20, y * 20, 20, 20)
                pygame.draw.rect(screen, (255, 255, 255), rect)

            self.food.draw_food(screen)  # Draw the food on the screen

            pygame.display.flip()
            clock.tick(10)

        pygame.quit()

    def handle_events(self, key: int):
        """
        Handles user input events.

        Args:
            key (int): The pressed key.
        """
        if key == pygame.K_UP and self.snake.direction != 'down':
            self.snake.direction = 'up'
        elif key == pygame.K_DOWN and self.snake.direction != 'up':
            self.snake.direction = 'down'
        elif key == pygame.K_LEFT and self.snake.direction != 'right':
            self.snake.direction = 'left'
        elif key == pygame.K_RIGHT and self.snake.direction != 'left':
            self.snake.direction = 'right'

    def update(self):
        """
        Updates the game state.

        Note:
            This method moves the snake, checks for collisions with food, and updates the score.
        """
        self.snake.move(self.board.width, self.board.height)
        if (self.snake.body[0][0] == self.food.x and 
            self.snake.body[0][1] == self.food.y):
            self.score += 1
            self.snake.grow()
            self.food.generate_new_position(self.snake.body)

# Example usage:
if __name__ == "__main__":
    game = Game(20, 20)
    game.run()
```


## Code to be Reviewed: main.py
```Code
"""
This module contains the main entry point for the game.
"""

import pygame
from board import Board
from snake import Snake
from food import Food
from game import Game

def main():
    """
    The main function that runs the game.
    """
    game = Game(20, 20)
    game.run()

if __name__ == "__main__":
    main()

```



# Format example 1
## Code Review: main.py
1. No, we should fix the logic of class A due to ...
2. ...
3. ...
4. No, function B is not implemented, ...
5. ...
6. ...

## Actions
1. Fix the `handle_events` method to update the game state only if a move is successful.
   ```python
   def handle_events(self):
       for event in pygame.event.get():
           if event.type == pygame.QUIT:
               return False
           if event.type == pygame.KEYDOWN:
               moved = False
               if event.key == pygame.K_UP:
                   moved = self.game.move('UP')
               elif event.key == pygame.K_DOWN:
                   moved = self.game.move('DOWN')
               elif event.key == pygame.K_LEFT:
                   moved = self.game.move('LEFT')
               elif event.key == pygame.K_RIGHT:
                   moved = self.game.move('RIGHT')
               if moved:
                   # Update the game state only if a move was successful
                   self.render()
       return True
   ```
2. Implement function B

## Code Review Result
LBTM

# Format example 2
## Code Review: main.py
1. Yes.
2. Yes.
3. Yes.
4. Yes.
5. Yes.
6. Yes.

## Actions
pass

## Code Review Result
LGTM



# Instruction: Based on the actual code situation, follow one of the "Format example". Return only 1 file under review.

## Code Review: Ordered List. Based on the "Code to be Reviewed", provide key, clear, concise, and specific answer. If any answer is no, explain how to fix it step by step.
1. Is the code implemented as per the requirements? If not, how to achieve it? Analyse it step by step.
2. Is the code logic completely correct? If there are errors, please indicate how to correct them.
3. Does the existing code follow the "Data structures and interfaces"?
4. Are all functions implemented? If there is no implementation, please indicate how to achieve it step by step.
5. Have all necessary pre-dependencies been imported? If not, indicate which ones need to be imported
6. Are methods from other files being reused correctly?

## Actions: Ordered List. Things that should be done after CR, such as implementing class A and function B

## Code Review Result: str. If the code doesn't have bugs, we don't need to rewrite it, so answer LGTM and stop. ONLY ANSWER LGTM/LBTM.
LGTM/LBTM





